[custom]

;================================================
; æ ¸å¿ƒï¼šé’‰é’‰å®šå‘å…¨å±€å…æµ (Host: tms.dingtalk.com)
; ä¿®æ­£ï¼šè¡¥å…¨æ‰€æœ‰ç¼ºå¤±åˆ†ç»„ï¼Œè§£å†³ Not Found æŠ¥é”™
; ç‰¹æ€§ï¼šä¿ç•™åŸæ‰‹åŠ¨æ§åˆ¶æƒï¼Œå°ç±³å—…æ¢ï¼ŒQUIC å½»åº•å°é”
;================================================

; 1. å†…æ ¸é«˜çº§å—…æ¢ (æ¥ç®¡å°ç±³ç³»ç»Ÿç›´è¿åŠéšåŒ¿æµé‡)
;------------------------------------------------
sniffer:
  enable: true
  sniff:
    TLS: {ports: [443, 8443]}
    HTTP: {ports: [80, 8080-8888], override-destination: true}
  force-domain: ["+"]

; 2. åè®®å°é” (å¼ºåˆ¶é™çº§ QUICï¼Œè§£å†³å…æµå¤±æ•ˆ)
;------------------------------------------------
rules:
  - AND,((DEST-PORT,443),(PROTOCOL,UDP)),REJECT
  - AND,((DEST-PORT,4430),(PROTOCOL,UDP)),REJECT

; 3. å…¨é˜¿é‡Œç³» DNS é—­ç¯ (åº•å±‚æŒ‡çº¹ä¼ªè£…)
;------------------------------------------------
dns_server=223.5.5.5, 223.6.6.6
dns_fallback_server=https://dns.google/dns-query, https://1.1.1.1/dns-query
dns_fake_ip=true
dns_enhanced_mode=fake-ip
dns_nameserver_policy={
  "geosite:cn,alibaba,dingtalk,xiaomi": ["223.5.5.5", "223.6.6.6"],
  "geosite:gfw,geolocation-!cn": ["proxy"]
}

; 4. è§„åˆ™é›†ä¼˜å…ˆçº§é‡æ’ (è§„åˆ™æ ‡ç­¾å¿…é¡»ä¸ä¸‹æ–¹ç­–ç•¥ç»„ 1:1 å¯¹åº”)
;------------------------------------------------
; [é¡¶çº§æ‹¦æˆª]
ruleset=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=ğŸƒ åº”ç”¨å‡€åŒ–,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
ruleset=ğŸš« å°ç±³ç³»ç»Ÿé™åˆ¶,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Xiaomi.list

; [ç¤¾äº¤/é€šä¿¡]
ruleset=ğŸ“² Telegram,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
ruleset=ğŸ¤– Discord,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml

; [åª’ä½“åˆ†ç»„]
ruleset=ğŸ§š AIåŠ©æ‰‹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
ruleset=ğŸ“¹ YouTube,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
ruleset=ğŸ¥ Netflix,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
ruleset=ğŸ¥ DisneyPlus,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml
ruleset=ğŸ¶ TikTok,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
ruleset=ğŸ“º Bilibili,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
ruleset=ğŸ“º å·´å“ˆå§†ç‰¹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml
ruleset=ğŸ¬ å›½é™…å½±éŸ³,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.yaml

; [éŸ³ä¹å¹³å°ç‹¬ç«‹åˆ†ç»„]
ruleset=ğŸµ Spotify,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
ruleset=â˜ï¸ ç½‘æ˜“äº‘éŸ³ä¹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/NetEaseMusic/NetEaseMusic.yaml

; [åŸºç¡€æœåŠ¡/æ¸¸æˆ]
ruleset=ğŸ® æ¸¸æˆå¹³å°,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
ruleset=ğŸ è‹¹æœæœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml
ruleset=â“‚ï¸ å¾®è½¯æœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
ruleset=ğŸ“¢ è°·æ­ŒæœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
ruleset=ğŸš© IPå½’å±åœ°,clash-classic:https://raw.githubusercontent.com/lwd-temp/anti-ip-attribution/main/generated/rule-provider.yaml

; [é€šç”¨åˆ†æµå…œåº•]
ruleset=ğŸš€ å›½å¤–æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=ğŸ¯ å›½å†…æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ğŸ¯ å›½å†…æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list

ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL

; 5. ç­–ç•¥ç»„æ„å»º (æ¯ä¸ª ruleset çš„æ ‡ç­¾åœ¨è¿™é‡Œå¿…é¡»æœ‰å¯¹åº”çš„ç»„)
;------------------------------------------------

; ã€æ ¸å¿ƒæ‰‹åŠ¨æ§åˆ¶ç»„ã€‘ä¿æŒåŸä¹ æƒ¯
custom_proxy_group=ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`select`.*
custom_proxy_group=ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`select`.*

; ã€åˆ†æµæ€»é—¸ã€‘
custom_proxy_group=ğŸ¯ å›½å†…æµé‡`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]DIRECT
custom_proxy_group=ğŸš€ å›½å¤–æµé‡`select`[]â™»ï¸ è‡ªåŠ¨æµ‹é€Ÿ`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2

; ã€é’ˆå¯¹æŠ¥é”™è¡¥å…¨ï¼šå¹¿å‘Šä¸å‡€åŒ–ã€‘
custom_proxy_group=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª`select`[]REJECT`[]DIRECT`[]ğŸš€ å›½å†…å…æµ
custom_proxy_group=ğŸƒ åº”ç”¨å‡€åŒ–`select`[]REJECT`[]DIRECT`[]ğŸš€ å›½å†…å…æµ

; ã€ç³»ç»Ÿçº§é™åˆ¶ã€‘
custom_proxy_group=ğŸš« å°ç±³ç³»ç»Ÿé™åˆ¶`select`[]ğŸš€ å›½å†…å…æµ`[]REJECT`[]DIRECT

; ã€åª’ä½“ App ç»†åˆ†ã€‘
custom_proxy_group=ğŸ§š AIåŠ©æ‰‹`select`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸš€ å›½å¤–å…æµ
custom_proxy_group=ğŸ“¹ YouTube`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¥ Netflix`select`[]ğŸ¥ å¥ˆé£èŠ‚ç‚¹`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¥ DisneyPlus`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¶ TikTok`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ“º Bilibili`select`[]DIRECT`[]ğŸš€ å›½å†…å…æµ`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
custom_proxy_group=ğŸ“º å·´å“ˆå§†ç‰¹`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¬ å›½é™…å½±éŸ³`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ”¯ æ•…éšœåˆ‡æ¢`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ“² Telegram`select`[]ğŸš€ å›½å¤–å…æµ`[]â™»ï¸ è‡ªåŠ¨æµ‹é€Ÿ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¤– Discord`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2

; ã€éŸ³ä¹å¹³å°ç‹¬ç«‹åŒ–ã€‘
custom_proxy_group=ğŸµ Spotify`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=â˜ï¸ ç½‘æ˜“äº‘éŸ³ä¹`select`[]ğŸš€ å›½å†…å…æµ`[]DIRECT

; ã€ç³»ç»ŸæœåŠ¡ä¸æ¸¸æˆã€‘
custom_proxy_group=ğŸ è‹¹æœæœåŠ¡`select`[]ğŸš€ å›½å†…å…æµ`[]DIRECT`[]ğŸš€ å›½å¤–æµé‡
custom_proxy_group=â“‚ï¸ å¾®è½¯æœåŠ¡`select`[]ğŸš€ å›½å†…å…æµ`[]DIRECT`[]ğŸš€ å›½å¤–æµé‡
custom_proxy_group=ğŸ“¢ è°·æ­ŒæœåŠ¡`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ® æ¸¸æˆå¹³å°`select`[]DIRECT`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1

; ã€æ ¸å¿ƒï¼šå…æµèŠ‚ç‚¹æ± ã€‘
custom_proxy_group=ğŸš€ å›½å†…å…æµ`select`(ä¸­å›½|CN|ç§»åŠ¨|è”é€š|ç”µä¿¡|é’‰é’‰|å…æµ|ML|Ding)
custom_proxy_group=ğŸš€ å›½å¤–å…æµ`select`(é¦™æ¸¯|æ—¥æœ¬|ç¾å›½|æ–°åŠ å¡|å°æ¹¾|HK|JP|US|SG|TW)

; ã€æµ‹é€Ÿä¸åŠŸèƒ½åˆ†ç»„ã€‘
custom_proxy_group=â™»ï¸ è‡ªåŠ¨æµ‹é€Ÿ`url-test`(^(?!.*(æµé‡|æ—¶é—´|å®˜ç½‘|æç¤º)).*)`https://www.gstatic.com/generate_204`180,,50
custom_proxy_group=ğŸ”¯ æ•…éšœåˆ‡æ¢`fallback`(^(?!.*(æµé‡|æ—¶é—´|å®˜ç½‘|æç¤º)).*)`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`url-test`(ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong Kong)`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`url-test`(ğŸ‡ºğŸ‡¸|ç¾|US|United States)`https://www.gstatic.com/generate_204`300,,150
custom_proxy_group=ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`url-test`(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|SG|Singapore)`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹`url-test`(ğŸ‡¹ğŸ‡¼|å°|TW|Taiwan)`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ¥ å¥ˆé£èŠ‚ç‚¹`select`(æ–°åŠ å¡|å°æ¹¾|é¦™æ¸¯|ç¾å›½|SG|TW|HK|US)
custom_proxy_group=ğŸš© IPå½’å±åœ°`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ å›½å¤–å…æµ`[]DIRECT

; ã€å…œåº•ï¼šé±¼ç¾¤é”æ­»ã€‘
custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸš€ å›½å¤–å…æµ`[]DIRECT

enable_rule_generator=true
overwrite_original_rules=true
