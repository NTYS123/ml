[custom]

;================================================
; æ ¸å¿ƒï¼šé’‰é’‰å®šå‘å…¨å±€å…æµ (Host: tms.dingtalk.com)
; ä¼˜åŒ–ï¼šç»†åŒ– Google FCMã€ä¿®æ­£æ‰‹åŠ¨æ§åˆ¶ä¼˜å…ˆçº§ã€æ·±åº¦åµŒå¥—å…æµæ± 
;================================================

; 1. å†…æ ¸é«˜çº§å—…æ¢ (å¼ºåˆ¶æ¥ç®¡éšåŒ¿æµé‡)
;------------------------------------------------
sniffer:
  enable: true
  sniff:
    TLS: {ports: [443, 8443]}
    HTTP: {ports: [80, 8080-8888], override-destination: true}
  force-domain: ["+"]

; 2. åè®®å°é” (å¼ºåˆ¶é™çº§ QUIC)
;------------------------------------------------
rules:
  - AND,((DEST-PORT,443),(PROTOCOL,UDP)),REJECT
  - AND,((DEST-PORT,4430),(PROTOCOL,UDP)),REJECT

; 3. å…¨é˜¿é‡Œç³» DNS é—­ç¯
;------------------------------------------------
dns_server=223.5.5.5, 223.6.6.6
dns_fallback_server=https://dns.google/dns-query, https://1.1.1.1/dns-query
dns_fake_ip=true
dns_enhanced_mode=fake-ip
dns_nameserver_policy={
  "geosite:cn,alibaba,dingtalk,xiaomi": ["223.5.5.5", "223.6.6.6"],
  "geosite:gfw,geolocation-!cn": ["proxy"]
}

; 4. è§„åˆ™é›†å¼•ç”¨ (ä¼˜å…ˆçº§ï¼šæ‹¦æˆª > ç³»ç»Ÿ > FCM > AI/åª’ä½“ > åŸºç¡€)
;------------------------------------------------
ruleset=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=ğŸƒ åº”ç”¨å‡€åŒ–,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
ruleset=ğŸš« å°ç±³ç³»ç»Ÿé™åˆ¶,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Xiaomi.list

; [é‡è¦] æ‰¾å›è°·æ­Œ FCM æ¨é€è§„åˆ™
ruleset=ğŸ“¢ è°·æ­ŒFCM,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleFCM/GoogleFCM.yaml

ruleset=ğŸ§š AIåŠ©æ‰‹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
ruleset=ğŸ“¹ YouTube,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
ruleset=ğŸ¥ Netflix,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
ruleset=ğŸ¥ DisneyPlus,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml
ruleset=ğŸ¶ TikTok,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
ruleset=ğŸ“º Bilibili,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
ruleset=ğŸ“º å·´å“ˆå§†ç‰¹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml
ruleset=ğŸ¬ å›½é™…å½±éŸ³,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.yaml
ruleset=ğŸ“² Telegram,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
ruleset=ğŸ¤– Discord,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml
ruleset=ğŸµ Spotify,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
ruleset=â˜ï¸ ç½‘æ˜“äº‘éŸ³ä¹,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/NetEaseMusic/NetEaseMusic.yaml
ruleset=ğŸ® æ¸¸æˆå¹³å°,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
ruleset=ğŸ è‹¹æœæœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml
ruleset=â“‚ï¸ å¾®è½¯æœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
ruleset=ğŸ“¢ è°·æ­ŒæœåŠ¡,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
ruleset=ğŸš© IPå½’å±åœ°,clash-classic:https://raw.githubusercontent.com/lwd-temp/anti-ip-attribution/main/generated/rule-provider.yaml

ruleset=ğŸš€ å›½å¤–æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=ğŸ¯ å›½å†…æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ğŸ¯ å›½å†…æµé‡,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list
ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL

; 5. ç­–ç•¥ç»„æ„å»º (æŒ‰ç…§æ‚¨çš„æœ€æ–°è¦æ±‚è°ƒæ•´)
;------------------------------------------------

custom_proxy_group=ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`select`.*
custom_proxy_group=ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`select`.*

; ã€å›½å¤–æµé‡ï¼šå»é™¤æ‰‹åŠ¨é€‰æ‹©ï¼Œå¢åŠ å…æµæ± åµŒå¥—ã€‘
custom_proxy_group=ğŸš€ å›½å¤–æµé‡`select`[]ğŸš€ å›½å¤–å…æµ`[]â™»ï¸ è‡ªåŠ¨æµ‹é€Ÿ`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ”¯ æ•…éšœåˆ‡æ¢

; ã€å›½å†…æµé‡ï¼šä¿æŒåŸæ§åˆ¶ã€‘
custom_proxy_group=ğŸ¯ å›½å†…æµé‡`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]DIRECT

; ã€ä¸“é¡¹åˆ†ç»„ï¼šå¢åŠ æ‰‹åŠ¨é€‰æ‹©2æ§åˆ¶ã€‘
custom_proxy_group=ğŸ“º Bilibili`select`[]DIRECT`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
custom_proxy_group=â˜ï¸ ç½‘æ˜“äº‘éŸ³ä¹`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]DIRECT
custom_proxy_group=ğŸ è‹¹æœæœåŠ¡`select`[]ğŸš€ å›½å†…å…æµ`[]DIRECT`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
custom_proxy_group=â“‚ï¸ å¾®è½¯æœåŠ¡`select`[]ğŸš€ å›½å†…å…æµ`[]DIRECT`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
custom_proxy_group=ğŸ® æ¸¸æˆå¹³å°`select`[]DIRECT`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹

; ã€IPå½’å±åœ°ï¼šå¢åŠ æ‰‹åŠ¨é€‰æ‹©12ã€‘
custom_proxy_group=ğŸš© IPå½’å±åœ°`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]DIRECT

; ã€è°·æ­ŒæœåŠ¡ä¸FCMï¼šç‹¬ç«‹åŒ–å¤„ç†ã€‘
custom_proxy_group=ğŸ“¢ è°·æ­ŒæœåŠ¡`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
custom_proxy_group=ğŸ“¢ è°·æ­ŒFCM`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸ”¯ æ•…éšœåˆ‡æ¢

; å…¶ä»–å¸¸ç”¨åª’ä½“ (ä¿æŒæ—¢æœ‰ä¼˜åŒ–)
custom_proxy_group=ğŸ“¹ YouTube`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¥ Netflix`select`[]ğŸ¥ å¥ˆé£èŠ‚ç‚¹`[]ğŸš€ å›½å¤–å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ¶ TikTok`select`[]ğŸš€ å›½å¤–å…æµ`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2
custom_proxy_group=ğŸ§š AIåŠ©æ‰‹`select`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1

; æ ¸å¿ƒèµ„æºç»„ (æµ‹é€Ÿ 600,100,true)
custom_proxy_group=ğŸš€ å›½å†…å…æµ`select`(ä¸­å›½|CN|ç§»åŠ¨|è”é€š|ç”µä¿¡|é’‰é’‰|å…æµ|ML|Ding)
custom_proxy_group=ğŸš€ å›½å¤–å…æµ`select`(é¦™æ¸¯|æ—¥æœ¬|ç¾å›½|æ–°åŠ å¡|å°æ¹¾|HK|JP|US|SG|TW)
custom_proxy_group=ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`url-test`(ğŸ‡­ğŸ‡°|æ¸¯|HK|Hong Kong)`http://www.gstatic.com/generate_204`600,100,true
custom_proxy_group=ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹`url-test`(ğŸ‡¹ğŸ‡¼|å°|TW|Taiwan)`http://www.gstatic.com/generate_204`600,100,true
custom_proxy_group=ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`url-test`(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|Japan)`http://www.gstatic.com/generate_204`600,100,true
custom_proxy_group=ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹`url-test`(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|SG|Singapore)`http://www.gstatic.com/generate_204`600,100,true
custom_proxy_group=ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹`url-test`(ğŸ‡ºğŸ‡¸|ç¾|US|United States)`http://www.gstatic.com/generate_204`600,100,true

; åŠŸèƒ½ç»„
custom_proxy_group=â™»ï¸ è‡ªåŠ¨æµ‹é€Ÿ`url-test`(^(?!.*(æµé‡|æ—¶é—´|å®˜ç½‘|æç¤º)).*)`http://www.gstatic.com/generate_204`600,150,true
custom_proxy_group=ğŸ”¯ æ•…éšœåˆ‡æ¢`fallback`(^(?!.*(æµé‡|æ—¶é—´|å®˜ç½‘|æç¤º)).*)`http://www.gstatic.com/generate_204`600,,true
custom_proxy_group=ğŸ›‘ å¹¿å‘Šæ‹¦æˆª`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸƒ åº”ç”¨å‡€åŒ–`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ å›½å†…å…æµ`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©1`[]ğŸš€ æ‰‹åŠ¨é€‰æ‹©2`[]DIRECT

enable_rule_generator=true
overwrite_original_rules=true
